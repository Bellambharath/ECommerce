<!-- <br>
<br>
<br>
<br>

<nav class="navbar navbar-expand-xl navbarcolor  fixed-top" style="margin-top:70px;background-color:white">
	<div>
		<select
			style="width: 200px;height: 30px; color: black; margin-left: 1000px;font-family: 'Times New Roman', Times, serif;"
			(change)="sortDropdown($event)">
			<option>Sort By Price</option>
			<option>Price:Low to High</option>
			<option>Price:High to Low</option>
		</select>
		<br>event
		<br>
		<div (change)="selectChange($event)" style="margin-left:150px">
            <button class="weap btn btn-light"
				style="font-family: 'Times New Roman', Times, serif;margin-right: 10px;border:solid gray"
				*ngFor="let d of dropdown" value="{{d}}" id="one" (click)="selectChange($)"> {{d}} &nbsp; 
            </button>
		</div>
	</div>
</nav>

<br>
<br>
<br><br><br><br>


<div class="container-fluid">
	<div class="row">

		<div class="col-lg-4 col-md-6  body"
			*ngFor="let product of products | filter:searchkey:'productName';index as i">

			<div class="product-content product-wrap clearfix">
				<div class="row">
					<div class="col-md-5 col-sm-12 col-xs-12">
						<div (click)="onClick(product.productId,rating[i],halfstar[i])"
							class="product-image text-center" [style.background-image]="'url(' + product.imageurl + ')'"
							style="background-size:100%;background-position:center;background-repeat:no-repeat;">
						</div>

					</div>
					<div class="col-md-7 col-sm-6 col-xs-12">
						<div (click)="onClick(product.productId,rating[i],halfstar[i])" class="product-deatil">
							<h5 class="name">
								<a href="#">
									<span class="d-inline-block text-truncate"
										style="max-width: 110%;color: black;font-size: 20px;">
										{{product.productName}}
									</span>
									<span >{{product.productCategory}}</span>
								</a>
							</h5>
							<p class="price-container ">
								<span>₹{{product.productPrice}}
									<div class="star-rating">
										<ul class="list-inline">
											<ngb-rating [max]="rating[i]" [rate]="rating[i]"
												[readonly]="true"></ngb-rating>
											<li *ngIf="halfstar[i]!=0" class="list-inline-item"
												style="padding-left:5px"><i class="fa fa-star-half-o"></i></li>
											<ngb-rating *ngIf="halfstar[i]!=0" [max]="5-(rating[i]+1)"
												[readonly]="true"></ngb-rating>
											<ngb-rating *ngIf="halfstar[i]==0" [max]="5-(rating[i])"
												[readonly]="true"></ngb-rating>
										</ul>

									</div>
								</span>
							</p>

							<span class="tag1"></span>
						</div>
						<div class="description"><span class="d-inline-block text-truncate " style="max-width: 100%;">
								{{product.productDescription}}
							</span>
						</div>
						<div class="product-info smart-form">
							<div class="row">
								<div *ngIf="rolecheck==true&&logincheck==true" class="col-md-6 col-sm-6 col-xs-6">
									<a class="btn btn-warning" (click)="AddToCart(product)">Add to Cart</a>
								</div>
								<div *ngIf="logincheck==false" class="col-md-6 col-sm-6 col-xs-6">
									<a class="btn btn-warning" (click)="CartWithOutLogin(product)">Add to Cart</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


	</div>
</div> -->

<!-- --------------------------------------- -->

<br><br><br><br>


<div class="wrapper container-fluid">
    <div class="d-md-flex align-items-md-center">

        <div class="ml-auto d-flex align-items-center views"> <span class="btn text-success">

            </span> <span class="green-label px-md-2 px-1">{{products.length}}</span> <span
                class="text-muted">Products</span> </div>
    </div>
    <div class="d-lg-flex align-items-lg-center pt-2">
        <div class="form-inline d-flex align-items-center my-2 checkbox bg-light border mx-lg-2">

            <label id="all" (click)="sortprices(0)" class="options">All<input name="radio" type="radio" checked> <span
                    class="checkmark"></span></label>
            <label (click)="sortprices(1)" class="options">Low to High <input type="radio" name="radio"> <span
                    class="checkmark"></span></label>
            <label (click)="sortprices(2)" class="options">High to Low <input type="radio" name="radio"> <span
                    class="checkmark"></span> </label>
        </div>

    </div>


    <div id="mobile-filter">
        <div class="py-3">
            <ul class="list-group" *ngIf="products.length<totalproducts.length" >
                <li (click)="selectChange('Category')" 
                    class="list-group-item list-group-item-action d-flex justify-content-between align-items-center category">
                    < All 
                </li>

            </ul>
            <h5 class="font-weight-bold">Categories</h5>

            <ul class="list-group" *ngFor="let category of dropdown;index as i">
                <li *ngIf="products.length>=totalproducts.length" (click)="selectChange(category)" value="{{category}}"
                    class="list-group-item list-group-item-action d-flex justify-content-between align-items-center category">
                    {{category}} <span class="badge badge-primary badge-pill">{{ProductQuantities[i]}}</span> </li>

            </ul>
        </div>

        <div class="py-3">
            <h5 class="font-weight-bold">Rating</h5>
            <form class="rating" *ngFor="let i of numberarray">
                <div class="form-inline d-flex align-items-center py-2">
                    <label class="tick"> <star-rating style="padding:0px" [value]=i [totalstars]=5
                            checkedcolor="#fcc200" uncheckedcolor="#ddd" size="21px"
                            [readonly]="true"></star-rating><input type="checkbox"> <span class="check"></span> </label>
                </div>

            </form>
        </div>
    </div>

    <div class="content  py-3 d-flex">

        <section class="sidebar">
            <div class="py-3">

                <ul class="list-group" *ngIf="products.length<totalproducts.length">

                    <li (click)="selectChange('Category')"
                        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center category">
                        < All 
                    </li>
                </ul>
                <h5 class="font-weight-bold">Categories</h5>

                <ul class="list-group" *ngFor="let category of dropdown;index as i;">

                    <li *ngIf="products.length>=totalproducts.length" (click)="selectChange(category)" value="{{category}}"
                        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center category">
                        {{category}}
                        <span class="badge badge-primary badge-pill">{{ProductQuantities[i]}}</span>
                    </li>

                </ul>
            </div>

            <div class="py-3">
                <h5 class="font-weight-bold">Rating</h5>
                <form class="rating">

                    <div class="form-inline d-flex align-items-center py-2" *ngFor="let i of numberarray">

                        <label class="tick">
                            <star-rating style="padding:0px" [value]=i [totalstars]=5 checkedcolor="#fcc200"
                                uncheckedcolor="#ddd" size="21px" [readonly]="true">
                            </star-rating>
                            <input (click)="FilterByRating(i)" name="flexRadioDefault" type="radio"><span class="check">

                            </span>
                        </label>

                    </div>

                </form>
            </div>
        </section>

        <section id="products">
            <div style="width:36%;margin: 0px;" *ngIf="products.length === 0">

                <h1 style="cursor:wait;color: red;">No Products Available With Selected Rating!!</h1>

            </div>
            <div class="container-fluid p-0 m-0" *ngIf="products.length != 0">
                <div class="row d-flex">
                    <div class="col-lg-3 col-md-4 col-sm-6"
                        *ngFor="let product of products | filter:searchkey:'productName';index as i">
                        <div class="card">

                            <img style="cursor: pointer;" (click)="onClick(product.productId,rating[i],halfstar[i])"
                                class="card-img-top" src="{{product.imageurl}}">
                            <div class="card-body">
                                <h6 style="cursor: pointer;" (click)="onClick(product.productId,rating[i],halfstar[i])"
                                    class="text-truncate truncate">{{product.productName}}</h6>
                                <div style="cursor: pointer;" (click)="onClick(product.productId,rating[i],halfstar[i])"
                                    class="text-muted description">{{product.productCategory}}</div>
                                <div class="star-rating">
                                    <star-rating style="padding:0px" [value]=product.productRating [totalstars]=5
                                        checkedcolor="#fcc200" uncheckedcolor="#ddd" size="21px" [readonly]="true">
                                    </star-rating>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="d-flex flex-column">
                                        <div class="h6 font-weight-bold">₹{{product.productPrice}}</div>
                                        <!-- <div class="text-muted rebate">₹{{product.productPrice}}</div> -->
                                    </div>
                                    <div class="row">
                                        <div *ngIf="rolecheck==true&&logincheck==true">
                                            <a class="btn btn-warning" (click)="AddToCart(product)">Add to Cart</a>
                                        </div>
                                        <div *ngIf="logincheck==false">
                                            <a class="btn btn-warning" (click)="CartWithOutLogin(product)">Add to
                                                Cart</a>
                                        </div>
                                    </div>
                                    <!-- <div class="btn btn-primary">Buy now</div> -->
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </section>
    </div>
</div>